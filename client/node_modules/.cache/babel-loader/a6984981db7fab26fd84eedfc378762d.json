{"ast":null,"code":"var _jsxFileName = \"/home/kubatarlowski/local-bytes/src/Components/Restaurants/Restaurants.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Restaurant from './Restaurant/Restaurant';\n\nconst Restaurants = () => {\n  const useCache = require('react-api-cache');\n\n  const [businesses, setBusinesses] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const actions = useCache();\n  const url = `https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search`;\n  const params = {\n    location: 'Hicksville, NY',\n    category: 'mexican'\n  };\n\n  const getRestaurants = async () => {\n    setLoading(true);\n    axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n      },\n      params: {}\n    }).then(res => {\n      console.log(`[API KEY] ${process.env.REACT_APP_API_KEY}`);\n      console.log(res.data);\n      setBusinesses(res.data.businesses);\n      setLoading(false);\n      actions.setCache(url, params);\n    }).catch(err => {\n      console.log(`[API KEY ERROR] ${process.env.REACT_APP_API_KEY}`);\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    const {\n      hasCache,\n      getCache\n    } = actions;\n\n    if (hasCache(url, params)) {\n      setBusinesses(getCache(url, params.data));\n    } else {\n      getRestaurants();\n    }\n\n    ;\n  }, []); //rating, price, phone, categories, name\n\n  return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"restaurant\");\n};\n\nexport default Restaurants;","map":{"version":3,"sources":["/home/kubatarlowski/local-bytes/src/Components/Restaurants/Restaurants.js"],"names":["React","useEffect","useState","axios","Restaurant","Restaurants","useCache","require","businesses","setBusinesses","loading","setLoading","actions","url","params","location","category","getRestaurants","get","headers","Authorization","process","env","REACT_APP_API_KEY","then","res","console","log","data","setCache","catch","err","hasCache","getCache"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,yBAAvB;;AAEA,MAAMC,WAAW,GAAG,MAAM;AAEtB,QAAMC,QAAQ,GAAGC,OAAO,CAAC,iBAAD,CAAxB;;AACA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BP,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACQ,OAAD,EAASC,UAAT,IAAuBT,QAAQ,CAAC,KAAD,CAArC;AAEA,QAAMU,OAAO,GAAGN,QAAQ,EAAxB;AAEA,QAAMO,GAAG,GAAI,+EAAb;AACA,QAAMC,MAAM,GAAG;AACXC,IAAAA,QAAQ,EAAE,gBADC;AAEXC,IAAAA,QAAQ,EAAE;AAFC,GAAf;;AAKA,QAAMC,cAAc,GAAG,YAAY;AAC/BN,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAR,IAAAA,KAAK,CAACe,GAAN,CAAUL,GAAV,EAAe;AACPM,MAAAA,OAAO,EAAE;AAELC,QAAAA,aAAa,EAAG,UAASC,OAAO,CAACC,GAAR,CAAYC,iBAAkB;AAFlD,OADF;AAKJT,MAAAA,MAAM,EAAE;AALJ,KAAf,EAQYU,IARZ,CAQkBC,GAAD,IAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAa,aAAYN,OAAO,CAACC,GAAR,CAAYC,iBAAkB,EAAvD;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACAnB,MAAAA,aAAa,CAACgB,GAAG,CAACG,IAAJ,CAASpB,UAAV,CAAb;AACAG,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAC,MAAAA,OAAO,CAACiB,QAAR,CAAiBhB,GAAjB,EAAsBC,MAAtB;AACH,KAdT,EAcWgB,KAdX,CAckBC,GAAD,IAAS;AACdL,MAAAA,OAAO,CAACC,GAAR,CAAa,mBAAkBN,OAAO,CAACC,GAAR,CAAYC,iBAAkB,EAA7D;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAYI,GAAZ;AACH,KAjBT;AAiBW,GAnBf;;AAqBA9B,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAM;AAAE+B,MAAAA,QAAF;AAAYC,MAAAA;AAAZ,QAAyBrB,OAA/B;;AACA,QAAIoB,QAAQ,CAACnB,GAAD,EAAMC,MAAN,CAAZ,EAA2B;AACvBL,MAAAA,aAAa,CAACwB,QAAQ,CAACpB,GAAD,EAAKC,MAAM,CAACc,IAAZ,CAAT,CAAb;AACH,KAFD,MAEO;AACHX,MAAAA,cAAc;AACjB;;AAAA;AACJ,GAPQ,EAON,EAPM,CAAT,CAnCsB,CA4C1B;;AACI,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ;AAGH,CAhDD;;AAkDA,eAAeZ,WAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Restaurant from './Restaurant/Restaurant'\n\nconst Restaurants = () => {\n\n    const useCache = require('react-api-cache')\n    const [businesses, setBusinesses] = useState([])\n    const [loading,setLoading] = useState(false)\n\n    const actions = useCache();\n\n    const url = `https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search`;\n    const params = {\n        location: 'Hicksville, NY',\n        category: 'mexican'\n    }\n\n    const getRestaurants = async () => {\n        setLoading(true)\n        axios.get(url, {\n                headers: {\n\n                    Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n                \n                }, params: {\n\n\n                }}).then((res) => {\n                    console.log(`[API KEY] ${process.env.REACT_APP_API_KEY}`)\n                    console.log(res.data)\n                    setBusinesses(res.data.businesses)\n                    setLoading(false)\n                    actions.setCache(url, params)\n                }).catch((err) => {\n                    console.log(`[API KEY ERROR] ${process.env.REACT_APP_API_KEY}`)\n                    console.log(err)\n                })}\n\n    useEffect(() => {\n        const { hasCache, getCache } = actions\n        if (hasCache(url, params)) {\n            setBusinesses(getCache(url,params.data))\n        } else {\n            getRestaurants()\n        };\n    }, [])\n          \n//rating, price, phone, categories, name\n    return (\n        <p>restaurant</p>\n    )\n}\n\nexport default Restaurants;"]},"metadata":{},"sourceType":"module"}