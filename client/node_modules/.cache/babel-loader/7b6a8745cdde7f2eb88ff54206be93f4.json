{"ast":null,"code":"var _jsxFileName = \"/home/kubatarlowski/local-bytes/src/Components/User/Visited/Visited.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Restaurant from '../../Restaurants/Restaurant/Restaurant';\nimport styles from '../../Restaurants/Restaurants.module.css';\n\nconst Visited = () => {\n  const [visiteds, setVisiteds] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    setLoading(true);\n    axios.get('https://local-byte.firebaseio.com/visited.json').then(userVisited => {\n      if (!userVisited.data) {\n        return;\n      }\n\n      const visitedIdObjs = Object.keys(userVisited.data);\n      const visitedIds = visitedIdObjs.map(key => {\n        return userVisited.data[key].id;\n      });\n      const promises = visitedIds.map(async id => {\n        const res = await axios.get('https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/' + id, {\n          headers: {\n            Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n          }\n        });\n        return res.data;\n      });\n      Promise.all(promises).then(restaurants => {\n        setVisiteds(restaurants);\n      });\n    }).catch(err => console.log(err));\n    setLoading(false);\n  }, [visiteds]);\n  let returnedRes = [];\n\n  if (visiteds) {\n    returnedRes = visiteds.map(business => {\n      return /*#__PURE__*/React.createElement(Restaurant, {\n        key: business.id,\n        name: business.name,\n        address: business.location.address1,\n        city: business.location.city,\n        state: business.location.state,\n        stars: business.rating,\n        categories: business.categories,\n        phone: business.display_phone,\n        pic: business.image_url,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 20\n        }\n      });\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.Restaurants,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 24\n    }\n  }, \"Loading ...\") : returnedRes);\n};\n\nexport default Visited;","map":{"version":3,"sources":["/home/kubatarlowski/local-bytes/src/Components/User/Visited/Visited.js"],"names":["React","useState","useEffect","axios","Restaurant","styles","Visited","visiteds","setVisiteds","loading","setLoading","get","then","userVisited","data","visitedIdObjs","Object","keys","visitedIds","map","key","id","promises","res","headers","Authorization","process","env","REACT_APP_API_KEY","Promise","all","restaurants","catch","err","console","log","returnedRes","business","name","location","address1","city","state","rating","categories","display_phone","image_url","Restaurants"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,yCAAvB;AACA,OAAOC,MAAP,MAAmB,0CAAnB;;AAEA,MAAMC,OAAO,GAAG,MAAM;AAClB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BP,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACQ,OAAD,EAASC,UAAT,IAAuBT,QAAQ,CAAC,KAAD,CAArC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZQ,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAP,IAAAA,KAAK,CAACQ,GAAN,CAAU,gDAAV,EACCC,IADD,CACMC,WAAW,IAAI;AACjB,UAAI,CAACA,WAAW,CAACC,IAAjB,EAAuB;AACnB;AACH;;AACD,YAAMC,aAAa,GAAGC,MAAM,CAACC,IAAP,CAAYJ,WAAW,CAACC,IAAxB,CAAtB;AACA,YAAMI,UAAU,GAAGH,aAAa,CAACI,GAAd,CAAmBC,GAAD,IAAS;AAC1C,eAAOP,WAAW,CAACC,IAAZ,CAAiBM,GAAjB,EAAsBC,EAA7B;AACH,OAFkB,CAAnB;AAGA,YAAMC,QAAQ,GAAGJ,UAAU,CAACC,GAAX,CAAe,MAAOE,EAAP,IAAc;AAC1C,cAAME,GAAG,GAAG,MAAMpB,KAAK,CAACQ,GAAN,CAAU,4EAA4EU,EAAtF,EAA0F;AACxGG,UAAAA,OAAO,EAAE;AACLC,YAAAA,aAAa,EAAG,UAASC,OAAO,CAACC,GAAR,CAAYC,iBAAkB;AADlD;AAD+F,SAA1F,CAAlB;AAKA,eAAOL,GAAG,CAACT,IAAX;AAAiB,OANJ,CAAjB;AAOAe,MAAAA,OAAO,CAACC,GAAR,CAAYR,QAAZ,EAAsBV,IAAtB,CAA4BmB,WAAD,IAAiB;AACxCvB,QAAAA,WAAW,CAACuB,WAAD,CAAX;AACH,OAFD;AAEG,KAlBP,EAkBSC,KAlBT,CAkBgBC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAlBxB;AAmBAvB,IAAAA,UAAU,CAAC,KAAD,CAAV;AACC,GAtBI,EAuBR,CAACH,QAAD,CAvBQ,CAAT;AAyBA,MAAI6B,WAAW,GAAG,EAAlB;;AACA,MAAI7B,QAAJ,EAAc;AACV6B,IAAAA,WAAW,GAAG7B,QAAQ,CAACY,GAAT,CAAckB,QAAD,IAAc;AACrC,0BAAO,oBAAC,UAAD;AACP,QAAA,GAAG,EAAEA,QAAQ,CAAChB,EADP;AAEP,QAAA,IAAI,EAAEgB,QAAQ,CAACC,IAFR;AAGP,QAAA,OAAO,EAAED,QAAQ,CAACE,QAAT,CAAkBC,QAHpB;AAIP,QAAA,IAAI,EAAEH,QAAQ,CAACE,QAAT,CAAkBE,IAJjB;AAKP,QAAA,KAAK,EAAEJ,QAAQ,CAACE,QAAT,CAAkBG,KALlB;AAMP,QAAA,KAAK,EAAEL,QAAQ,CAACM,MANT;AAOP,QAAA,UAAU,EAAEN,QAAQ,CAACO,UAPd;AAQP,QAAA,KAAK,EAAEP,QAAQ,CAACQ,aART;AASP,QAAA,GAAG,EAAER,QAAQ,CAACS,SATP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AAWH,KAZa,CAAd;AAaH;;AAED,sBACI;AAAK,IAAA,SAAS,EAAEzC,MAAM,CAAC0C,WAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKtC,OAAO,gBAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAH,GAAwB2B,WADpC,CADJ;AAKH,CAnDD;;AAqDA,eAAe9B,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Restaurant from '../../Restaurants/Restaurant/Restaurant'\nimport styles from '../../Restaurants/Restaurants.module.css'\n\nconst Visited = () => {\n    const [visiteds, setVisiteds] = useState([])\n    const [loading,setLoading] = useState(false)\n\n    useEffect(() => {\n        setLoading(true)\n        axios.get('https://local-byte.firebaseio.com/visited.json')\n        .then(userVisited => {\n            if (!userVisited.data) {\n                return\n            }\n            const visitedIdObjs = Object.keys(userVisited.data)\n            const visitedIds = visitedIdObjs.map((key) => {\n                return userVisited.data[key].id\n            })\n            const promises = visitedIds.map(async (id) => {\n                const res = await axios.get('https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/' + id, {\n                    headers: {\n                        Authorization: `Bearer ${process.env.REACT_APP_API_KEY}`\n                    }\n                });\n                return res.data;})\n            Promise.all(promises).then((restaurants) => {\n                setVisiteds(restaurants) \n            })}).catch((err) => console.log(err))\n        setLoading(false)\n        }\n    ,[visiteds])\n\n    let returnedRes = []\n    if (visiteds) {\n        returnedRes = visiteds.map((business) => {\n            return <Restaurant \n            key={business.id}\n            name={business.name}\n            address={business.location.address1}\n            city={business.location.city}\n            state={business.location.state}\n            stars={business.rating}\n            categories={business.categories}\n            phone={business.display_phone}\n            pic={business.image_url}\n        />\n        })\n    }\n\n    return (\n        <div className={styles.Restaurants}>\n            {loading ? <p>Loading ...</p> : returnedRes}\n        </div>\n    )\n}\n\nexport default Visited;"]},"metadata":{},"sourceType":"module"}